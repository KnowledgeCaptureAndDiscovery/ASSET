<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../workflow-elements/workflow-elements.html">
<link rel="import" href="../elements-detail/elements-detail.html">
<link rel="import" href="../../bower_components/polymer/lib/utils/gestures.html">
<link rel="import" href="../table/interactive-table.html">



<dom-module id="asset-app">
  <template>
    <style is="custom-style">
      :host {
        display: block;
      }

      #titleSection {
        border: 1px solid #ccc;
        text-align: center;
        font-size: .8vw;
        height: 4vw;
      }

      #ContentSection {
        column-count: 2 auto;
        margin: 1vw;
        margin-top: 0vw; 
        column-gap: 15vw;
        margin-right: -15vw;
        width: 96vw;
        height: 75vh;
      }

      #leftSsection{
        float: left;
        width: 15vw;
        text-align: center;
        padding: 1vw;
      }

      #rightSsection {
        padding: 1vw;
        width: 77vw;
        height: 75vh; 
        user-select: none;
        float: right; 
      }

      #populateDetailsSection {
        margin-top: 10px;
        padding: .35%;
        border: 1px solid #ccc;
        width: auto;
        height: auto;
		    overflow: auto;
      }

      .clr {
        clear: both;
      }

      /* Popup container - can be anything you want */
      .popupContainer {
        position: absolute;
        display: inline-block;
        visibility: hidden;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        left: 1px;
        top: 1px;
      }

      /* The actual popup */
      .popupContainer .popuptext {
        visibility: hidden;
        width: 300px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 8px 0;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 15%;
        margin-left: -150px;
      }

      /* Popup arrow */
      .popupContainer .popuptext::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #555 transparent transparent transparent;
      }

      /* Toggle this class - hide and show the popup */
      .popupContainer .show {
        visibility: visible;
      }

      #canvasContainerSection {
        width: 100%;
        height: 87%;
        border: 1px solid #ccc;
        /*overflow: scroll;*/
      }
        
        /*slider stuff from w3schools https://www.w3schools.com/howto/howto_js_rangeslider.asp*/
        
        #sizeSlider {
        -webkit-appearance: none;
        width: 100%;
        height: 15px;
        border-radius: 5px;
        background: #d3d3d3;
        outline: none;
        opacity:1;
        -webkit-transition: .15s;
        transition: opacity .15s;
        overflow : visible;
        }
        
        #sizeSlider:hover {
            opacity: 1;
        }
        
        #sizeSlider::-webkit-slider-thumb {
        -webkit-appearance: none;
         appearance: none;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #4CAF50;
        cursor: pointer;
        }
        
        hr { 
        display: block;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: auto;
        margin-right: auto;
        border-style: inset;
        border-width: 1px;
        }

        footer {
          user-select: none;
          margin: auto;
          text-align: center;
        }

        paper-slider {
          --paper-slider-knob-start-color: #388e3c;
          --paper-slider-active-color: #388e3c;
          --paper-slider-knob-color: #388e3c;
          --paper-slider-disabled-knob-color: #228B22;
          --paper-slider-disabled-active-color: #228B22;
          opacity: 1;
        }
        
        .buttonImage {
          height : 8vh;
          position: absolute;
          top: 0;
        }

        .buttonText {
          position: absolute;
          bottom: 0;
          font-size : 1.3vh;
        }
        .buttonContainer {
          height : 8vh;
          width: 8vh;
        }

    </style> 

    <div id="titleSection"><h1 contenteditable="true" onkeypress="ignoreEnters(event)" onblur="saveTitle(event)" id = "title">New Workflow</h1></div>

    <div id="ContentSection">

      <div draggable="false" id="leftSsection">
        <workflow-elements draggable="false" id="elementsSelect" src="content.json"></workflow-elements>
        <hr>
        <div draggable="false" id= "sizeSliderSection">
            Zoom:
            <paper-slider disabled draggable="false" ignore-bar-touch="true" step=".1" min="1" max="3" value="1" id="sizeSlider"></paper-slider>
        </div>
        <br />
        <paper-button draggable="false" class = "buttonContainer" onclick="undo()"><img draggable="false" class = "buttonImage" src = "../../Images/backButton.png"></paper-button>
        <paper-button draggable="false" class = "buttonContainer" onclick="alert(e)"><img draggable="false" class = "buttonImage" src = "../../Images/redoButton.png"></paper-button>
        <hr>
        <div id="descriptionSection">
          <interactive-table id="table" style= "visibility: hidden;"></interactive-table>
        </div>
      </div>
      
      <div id="rightSsection">
        <div id="canvasContainerSection">
          <canvas onkeydown="buttonPressed(event)" ondblclick="onDoubleClick(event)" onclick="canvasClick(event)" onwheel="mouseScrollingCanvas(event)"  onmousemove="mouseMoveFunction(event)" onmousedown="mouseDownFunction(event)" onmouseup="mouseUpFunction(event)" id="workflowSketchCanvas" ondragover="allowDrop(event)" ondrop="drop(event)">Your browser does not support HTML5 Canvas</canvas>
        </div>
        <div id="populateDetailsSection"></div>
        <br>
        <footer>
            <a href="#" id="exportAnchor" onclick= "downloaded(event)" draggable = "false">Export Sketch</a>  |  <a href="#" draggable="false" onclick="importWorkflow(event)" id="importAnchor">Import Sketch</a>
        </footer> 
      </div>
      
      <div class="clr"></div>
      
    </div>

    

    <div class="popupContainer" id="popupContainer">
      <span class="popuptext" id="popup"></span>
    </div>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class AssetApp extends Polymer.Element {
      static get is() { return 'asset-app'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'asset-app'
          }
        };
      }
    }

    window.customElements.define(AssetApp.is, AssetApp);
  </script>
</dom-module>
